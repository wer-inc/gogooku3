# Dataset builder environment variables
# Copy to .env and fill with credentials before running pipelines.

# J-Quants API credentials (required)
JQUANTS_AUTH_EMAIL=
JQUANTS_AUTH_PASSWORD=
JQUANTS_PLAN_TIER=standard

# Optional: override dataset output directory (chunks, merged datasets, etc.)
DATA_OUTPUT_DIR=output_g5

# Optional: override cache/raw storage roots (defaults derive from DATA_OUTPUT_DIR)
DATA_CACHE_DIR=
RAW_DATA_DIR=
RAW_MANIFEST_PATH=
# Persist raw API payloads (per-source Parquet snapshots under RAW_DATA_DIR)
SAVE_RAW_DATA=0
# Auto-chunk raw data after each chunk build + regenerate manifest
AUTO_CHUNK_RAW_DATA=0
RAW_CHUNK_SOURCES=prices

# Optional: dataset artifact configuration
# LATEST_DATASET_SYMLINK=ml_dataset_latest.parquet
# LATEST_METADATA_SYMLINK=ml_dataset_latest_metadata.json
# DATASET_TAG=full
# DATASET_RETENTION_KEEP=3
# DATASET_PARQUET_COMPRESSION=zstd

# Dataset quality checks (enabled in prod builds)
ENABLE_DATASET_QUALITY_CHECK=1
DATASET_QUALITY_TARGETS=ret_prev_1d,ret_prev_5d,ret_prev_20d,ret_prev_60d
DATASET_QUALITY_ASOF_CHECKS=DisclosedDate<=Date,earnings_event_date<=Date
DATASET_QUALITY_FAIL_ON_WARNING=0
# DATASET_QUALITY_DATE_COL=date
# DATASET_QUALITY_CODE_COL=code
# DATASET_QUALITY_ALLOW_FUTURE_DAYS=0
# DATASET_QUALITY_SAMPLE_ROWS=5

# Optional: cache TTL controls (days; 0 disables expiry)
# CACHE_TTL_DAYS_DEFAULT=1
# CACHE_TTL_DAYS_MARGIN_DAILY=1
# CACHE_TTL_DAYS_MARGIN_WEEKLY=7
# CACHE_TTL_DAYS_TOPIX=3
# CACHE_TTL_DAYS_TRADES_SPEC=7
# CACHE_TTL_DAYS_SHORT=2
# CACHE_TTL_DAYS_SECTOR_SHORT=2
# CACHE_TTL_DAYS_MACRO=14
# CACHE_TTL_DAYS_CALENDAR=7

# Optional: Arrow IPC cache optimization (3-5x faster reads)
# CACHE_FORMAT=auto                    # Cache format: 'parquet' (compatible), 'ipc' (fast), 'auto' (IPC + Parquet fallback)
# DATASET_OUTPUT_FORMAT=parquet        # Final dataset: 'parquet' (archival), 'ipc' (fast), 'dual' (both formats)
# ENABLE_LAZY_SCANS=True               # Enable Polars lazy scan optimizations (predicate pushdown, column pruning)
# IPC_COMPRESSION=lz4                  # IPC compression: 'lz4' (fast), 'zstd' (better ratio), 'uncompressed'
