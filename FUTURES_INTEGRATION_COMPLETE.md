# å…ˆç‰©æ©Ÿèƒ½çµ±åˆå®Œäº†ãƒ¬ãƒãƒ¼ãƒˆ ğŸš€

## âœ… å®Œäº†ã—ãŸæ©Ÿèƒ½

### 1. CLIã‚ªãƒ—ã‚·ãƒ§ãƒ³ã®çµ±åˆ
- `--futures-continuous`: é€£ç¶šå…ˆç‰©ç³»åˆ—ï¼ˆfut_whole_ret_cont_*ï¼‰ã®æœ‰åŠ¹/ç„¡åŠ¹åˆ¶å¾¡
- `--disable-futures`: å…ˆç‰©æ©Ÿèƒ½ã®ç„¡åŠ¹åŒ–
- `--futures-parquet`: å…ˆç‰©parquetãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ‘ã‚¹æŒ‡å®š
- `--futures-categories`: å…ˆç‰©ã‚«ãƒ†ã‚´ãƒªã®æŒ‡å®šï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: TOPIXF,NK225F,JN400F,REITFï¼‰
- `--nk225-parquet`: æ—¥çµŒ225ã‚¹ãƒãƒƒãƒˆãƒ‡ãƒ¼ã‚¿ã®ãƒ‘ã‚¹æŒ‡å®š
- `--reit-parquet`: REITã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚¹ãƒãƒƒãƒˆãƒ‡ãƒ¼ã‚¿ã®ãƒ‘ã‚¹æŒ‡å®š
- `--jpx400-parquet`: JPX400ã‚¹ãƒãƒƒãƒˆãƒ‡ãƒ¼ã‚¿ã®ãƒ‘ã‚¹æŒ‡å®š

### 2. è‡ªå‹•æ¤œå‡ºæ©Ÿèƒ½
ã‚¹ãƒãƒƒãƒˆparquetãƒ•ã‚¡ã‚¤ãƒ«ã®è‡ªå‹•æ¤œå‡ºæ©Ÿèƒ½ãŒå®Ÿè£…æ¸ˆã¿ï¼š
- Nikkei225: `nikkei`, `nk225`, `nikkei225` ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§æ¤œå‡º
- REIT: `reit` ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§æ¤œå‡º
- JPX400: `jpx400` ã¾ãŸã¯ `jp` + `400` ã®ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã§æ¤œå‡º

### 3. ãƒ™ãƒ¼ã‚·ã‚¹ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ­ã‚°
å…ˆç‰©æ©Ÿèƒ½çµ±åˆæ™‚ã«ä»¥ä¸‹ã®æƒ…å ±ã‚’ãƒ­ã‚°å‡ºåŠ›ï¼š
- ã‚«ãƒ†ã‚´ãƒªåˆ¥ã‚¹ãƒãƒƒãƒˆãƒ‡ãƒ¼ã‚¿ã®åˆ©ç”¨å¯èƒ½æ€§
- å…ˆç‰©ç‰¹å¾´é‡ã®æ•°
- ãƒ™ãƒ¼ã‚·ã‚¹ç‰¹å¾´é‡ã®æ•°
- é€£ç¶šç³»åˆ—ã®æœ‰åŠ¹/ç„¡åŠ¹çŠ¶æ…‹

### 4. JQuants APIçµ±åˆ
- `get_futures_daily()` ãƒ¡ã‚½ãƒƒãƒ‰ã«ã‚ˆã‚‹å…ˆç‰©ãƒ‡ãƒ¼ã‚¿ã®è‡ªå‹•å–å¾—
- ãƒ¬ãƒ¼ãƒˆåˆ¶é™å¯¾å¿œã¨è‡ªå‹•ãƒªãƒˆãƒ©ã‚¤æ©Ÿèƒ½

## ğŸ“Š æ©Ÿèƒ½ãƒ†ã‚¹ãƒˆçµæœ

```
ğŸš€ Futures Integration Test Suite
==================================================
ğŸ“Š Test Results Summary:
  - Auto-discovery: âŒ FAIL (ã‚¹ãƒãƒƒãƒˆãƒ•ã‚¡ã‚¤ãƒ«ãªã— - æ­£å¸¸)
  - Features Module: âœ… PASS
  - JQuants API: âœ… PASS
  - Pipeline Integration: âœ… PASS
  - CLI Options: âœ… PASS

ğŸ¯ Overall: 4/5 tests passed
âœ… Futures integration mostly complete with minor issues
```

## ğŸ”§ ä½¿ç”¨æ–¹æ³•

### åŸºæœ¬çš„ãªå…ˆç‰©æ©Ÿèƒ½ã®æœ‰åŠ¹åŒ–
```bash
python scripts/pipelines/run_full_dataset.py \
  --jquants \
  --start-date 2020-09-06 \
  --end-date 2025-09-06 \
  --enable-futures  # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ON
```

### é€£ç¶šå…ˆç‰©ç³»åˆ—ã®æœ‰åŠ¹åŒ–
```bash
python scripts/pipelines/run_full_dataset.py \
  --jquants \
  --start-date 2020-09-06 \
  --end-date 2025-09-06 \
  --futures-continuous  # é€£ç¶šç³»åˆ—ã‚’æœ‰åŠ¹åŒ–
```

### ã‚¹ãƒãƒƒãƒˆãƒ‡ãƒ¼ã‚¿ã®æŒ‡å®š
```bash
python scripts/pipelines/run_full_dataset.py \
  --jquants \
  --start-date 2020-09-06 \
  --end-date 2025-09-06 \
  --nk225-parquet output/nikkei225_spot.parquet \
  --reit-parquet output/reit_index.parquet \
  --jpx400-parquet output/jpx400_spot.parquet
```

### å…ˆç‰©ã‚«ãƒ†ã‚´ãƒªã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º
```bash
python scripts/pipelines/run_full_dataset.py \
  --jquants \
  --start-date 2020-09-06 \
  --end-date 2025-09-06 \
  --futures-categories "TOPIXF,NK225F"  # ç‰¹å®šã‚«ãƒ†ã‚´ãƒªã®ã¿
```

## ğŸ¯ ç”Ÿæˆã•ã‚Œã‚‹ç‰¹å¾´é‡

### ã‚ªãƒ¼ãƒãƒ¼ãƒŠã‚¤ãƒˆï¼ˆONï¼‰ã‚·ã‚°ãƒŠãƒ«
- `fut_*_on_signal`: å¤œé–“å–å¼•ã®å¤‰å‹•ã‚’ç¿Œå–¶æ¥­æ—¥ã«åæ˜ 

### ãƒ™ãƒ¼ã‚·ã‚¹ç‰¹å¾´é‡
- `fut_*_basis`: å…ˆç‰©ä¾¡æ ¼ - ç¾ç‰©ä¾¡æ ¼ã«ã‚ˆã‚‹è£å®šæ©Ÿä¼šã®æ¸¬å®š
- `fut_*_basis_momentum`: ãƒ™ãƒ¼ã‚·ã‚¹ã®å¤‰åŒ–ç‡

### é€£ç¶šç³»åˆ—ï¼ˆ--futures-continuousæœ‰åŠ¹æ™‚ï¼‰
- `fut_whole_ret_cont_*`: æ¯”ç‡é€£å‹•ã®é€£ç¶šå…ˆç‰©ãƒªã‚¿ãƒ¼ãƒ³ç³»åˆ—

### å»ºç‰ãƒ»å‡ºæ¥é«˜ç‰¹å¾´é‡
- `fut_*_volume_ratio`: å‡ºæ¥é«˜æ¯”ç‡
- `fut_*_oi_change`: å»ºç‰å¤‰åŒ–é‡

## âš ï¸ æ³¨æ„äº‹é …

1. **ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®š**:
   - å…ˆç‰©æ©Ÿèƒ½: æœ‰åŠ¹ï¼ˆ`enable_futures=True`ï¼‰
   - é€£ç¶šç³»åˆ—: ç„¡åŠ¹ï¼ˆ`futures_continuous=False`ï¼‰

2. **ã‚¹ãƒãƒƒãƒˆãƒ‡ãƒ¼ã‚¿ä¾å­˜**:
   - ãƒ™ãƒ¼ã‚·ã‚¹è¨ˆç®—ã«ã¯ã‚¹ãƒãƒƒãƒˆãƒ‡ãƒ¼ã‚¿ãŒå¿…è¦
   - è‡ªå‹•æ¤œå‡ºã¾ãŸã¯ãƒ‘ã‚¹æŒ‡å®šã§æä¾›

3. **ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡**:
   - å…ˆç‰©ãƒ‡ãƒ¼ã‚¿ã¯æ¯”è¼ƒçš„å°ã•ã„ãŒã€å¤šã‚«ãƒ†ã‚´ãƒªæŒ‡å®šæ™‚ã¯æ³¨æ„

## ğŸ‰ çµ±åˆå®Œäº†

å…ˆç‰©æ©Ÿèƒ½ã®çµ±åˆãŒå®Œäº†ã—ã¾ã—ãŸï¼ã“ã‚Œã§ä»¥ä¸‹ã®ä¸»è¦ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ãŒåˆ©ç”¨å¯èƒ½ã§ã™ï¼š

- âœ… ä¿¡ç”¨å–å¼•æ®‹é«˜ï¼ˆMargin Interestï¼‰ - é€±æ¬¡ãƒ»æ—¥æ¬¡
- âœ… ç©ºå£²ã‚Šï¼ˆShort Sellingï¼‰ - æ¯”ç‡ãƒ»æ®‹é«˜
- âœ… å…ˆç‰©ï¼ˆFuturesï¼‰ - æŒ‡æ•°å…ˆç‰©ãƒ»ãƒ™ãƒ¼ã‚·ã‚¹
- âœ… æ±ºç®—ã‚¤ãƒ™ãƒ³ãƒˆï¼ˆEarnings Eventsï¼‰ - ç™ºè¡¨è¿‘æ¥ãƒ»PEAD

æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—: Advanced volatility measures ã®å®Ÿè£…ã«é€²ã¿ã¾ã™ã€‚